(()=>{"use strict";let e;const a=new Date,s=a.getHours()+":"+a.getMinutes(),t="Alfred",o={officeEpicesDev:"Epices - Dev",officeEpicesSUpport:"Epices - Support",jitsiChillZone:"Pause café",jitsiGaia:"Gaia",jitsiHelios:"Helios",jitsiEole:"Eole",silent:"Ne pas déranger",terrace:"Pause repas"};WA.onInit().then((()=>{const e=WA.state.loadVariable("players");console.log(e),WA.state.saveVariable("players",Object.assign(Object.assign({},e),{[WA.player.name]:""}))})),window.addEventListener("beforeunload",(function(e){const a=WA.state.loadVariable("players");delete a[WA.player.name],WA.state.saveVariable("players",a)})),WA.ui.registerMenuCommand("Liste de presence",(()=>{const e=WA.state.loadVariable("players");WA.chat.sendChatMessage("//// Liste de présence :",t),Object.entries(e).forEach((([e,a])=>{if(e===WA.player.name)return;const s=""!=a?` : ${o[a]}`:"";WA.chat.sendChatMessage(`${e}${s}`,t)}))})),Object.keys(o).forEach((e=>{WA.room.onEnterZone(e,(()=>{const a=WA.state.loadVariable("players");WA.state.saveVariable("players",Object.assign(Object.assign({},a),{[WA.player.name]:e}))})),WA.room.onLeaveZone(e,(()=>{const e=WA.state.loadVariable("players");WA.state.saveVariable("players",Object.assign(Object.assign({},e),{[WA.player.name]:""}))}))})),WA.room.onEnterZone("clock",(()=>{e=WA.ui.openPopup("clockPopup","It's "+s,[])})),WA.room.onLeaveZone("clock",(function(){void 0!==e&&(e.close(),e=void 0)}))})();
//# sourceMappingURL=script.js.map