{"version":3,"sources":["webpack://workadventure-map-starter-kit/./src/index.ts"],"names":["currentPopup","today","Date","time","getHours","getMinutes","BOT_NAME","ZONES","officeEpicesDev","officeEpicesSUpport","jitsiChillZone","jitsiGaia","jitsiHelios","jitsiNeptune","silent","WA","onInit","then","players","state","loadVariable","console","log","saveVariable","player","name","ui","registerMenuCommand","chat","sendChatMessage","Object","entries","forEach","zone","whereAt","keys","office","room","onEnterZone","onLeaveZone","openPopup","undefined","close"],"mappings":"mBAEA,IAAIA,EACJ,MAAMC,EAAQ,IAAIC,KACZC,EAAOF,EAAMG,WAAa,IAAMH,EAAMI,aACtCC,EAAW,SACXC,EAAc,CAChBC,gBAAiB,eACjBC,oBAAqB,mBACrBC,eAAgB,aAChBC,UAAW,OACXC,YAAa,SACbC,aAAc,UACdC,OAAQ,mBAGZC,GAAGC,SAASC,MAAK,KACb,MAAMC,EAAeH,GAAGI,MAAMC,aAAa,WAC3CC,QAAQC,IAAIJ,GACZH,GAAGI,MAAMI,aAAa,UAAW,OAAF,wBAAML,GAAO,CAAE,CAACH,GAAGS,OAAOC,MAAO,SAIpEV,GAAGW,GAAGC,oBAAoB,qBAAqB,KAC3C,MAAMT,EAAeH,GAAGI,MAAMC,aAAa,WAM3CL,GAAGa,KAAKC,gBAAgB,2BAA4BvB,GACpDwB,OAAOC,QAAQb,GAASc,SAAQ,EAAEP,EAAMQ,MACpC,MAAMC,EAA4B,IAARD,EAAa,MAAM1B,EAAM0B,KAAU,GAC7DlB,GAAGa,KAAKC,gBAAgB,GAAGJ,IAAOS,IAAW5B,SAMrDwB,OAAOK,KAAK5B,GAAOyB,SAAQI,IACvBrB,GAAGsB,KAAKC,YAAYF,GAAQ,KACxB,MAAMlB,EAAeH,GAAGI,MAAMC,aAAa,WAC3CL,GAAGI,MAAMI,aAAa,UAAW,OAAF,wBAAML,GAAO,CAAE,CAACH,GAAGS,OAAOC,MAAOW,QAGpErB,GAAGsB,KAAKE,YAAYH,GAAS,KACzB,MAAMlB,EAAeH,GAAGI,MAAMC,aAAa,WAC3CL,GAAGI,MAAMI,aAAa,UAAW,OAAF,wBAAML,GAAO,CAAE,CAACH,GAAGS,OAAOC,MAAO,YAKxEV,GAAGsB,KAAKC,YAAY,SAAS,KACzBtC,EAAgBe,GAAGW,GAAGc,UAAU,aAAa,QAAUrC,EAAK,OAGhEY,GAAGsB,KAAKE,YAAY,SAEpB,gBACyBE,IAAjBzC,IACAA,EAAa0C,QACb1C,OAAeyC,O","file":"script.js","sourcesContent":["/// <reference path=\"../node_modules/@workadventure/iframe-api-typings/iframe_api.d.ts\" />\n\nlet currentPopup: any = undefined;\nconst today = new Date();\nconst time = today.getHours() + \":\" + today.getMinutes();\nconst BOT_NAME = 'Alfred'\nconst ZONES : any = {\n    officeEpicesDev: 'Epices - Dev',\n    officeEpicesSUpport: 'Epices - Support',\n    jitsiChillZone: 'Pause café',\n    jitsiGaia: 'Gaia',\n    jitsiHelios: 'Helios',\n    jitsiNeptune: 'Neptune',\n    silent: 'Ne pas déranger'\n}\n\nWA.onInit().then(() => {\n    const players: any = WA.state.loadVariable('players')\n    console.log(players)\n    WA.state.saveVariable('players', {...players, [WA.player.name]: ''})\n});\n\n//////// MENU\nWA.ui.registerMenuCommand(\"Liste de presence\", () => {\n    const players: any = WA.state.loadVariable('players')\n    /*const text: string = players\n        ? Object.entries(players).map(([name, zone]) => `${name} : ${zone}`).join(\"\\n\")\n        //? players\n        : 'No one online'\n    WA.chat.sendChatMessage(text, \"Bot\")*/\n    WA.chat.sendChatMessage('//// Liste de présence :', BOT_NAME)\n    Object.entries(players).forEach(([name, zone]: [string, any]) => {\n        const whereAt : string = (zone != '' ? ` : ${ZONES[zone]}` : '')\n        WA.chat.sendChatMessage(`${name}${whereAt}`, BOT_NAME)\n    })\n})\n\n\n/////// ZONES\nObject.keys(ZONES).forEach(office => {\n    WA.room.onEnterZone(office, () => {\n        const players: any = WA.state.loadVariable('players')\n        WA.state.saveVariable('players', {...players, [WA.player.name]: office})\n    })\n    \n    WA.room.onLeaveZone(office,  () => {\n        const players: any = WA.state.loadVariable('players')\n        WA.state.saveVariable('players', {...players, [WA.player.name]: ''})\n    })\n})\n\n\nWA.room.onEnterZone('clock', () => {\n    currentPopup =  WA.ui.openPopup(\"clockPopup\",\"It's \" + time,[]);\n})\n\nWA.room.onLeaveZone('clock', closePopUp)\n\nfunction closePopUp(){\n    if (currentPopup !== undefined) {\n        currentPopup.close();\n        currentPopup = undefined;\n    }\n}\n"],"sourceRoot":""}